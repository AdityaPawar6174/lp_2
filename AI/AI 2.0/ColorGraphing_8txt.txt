def is_safe(graph, colors, vertex, color):
    for neighbor in graph[vertex]:
        if colors[neighbor] == color:
            return False
    return True

def graph_coloring(graph, m):
    n = len(graph)
    colors = [-1] * n  # -1 indicates no color assigned

    def backtrack(vertex):
        if vertex == n:
            return True  # All vertices are colored

        for color in range(m):
            if is_safe(graph, colors, vertex, color):
                colors[vertex] = color
                if backtrack(vertex + 1):
                    return True
                colors[vertex] = -1  # Backtrack
        return False

    if backtrack(0):
        return colors
    else:
        return None

# Example usage
if __name__ == "__main__":
    # Graph represented as adjacency list
    # Example: A triangle graph (3 vertices, each connected to the other two)
    graph = {
        0: [1, 2],
        1: [0, 2],
        2: [0, 1]
    }

    m = 3  # Number of colors

    result = graph_coloring(graph, m)

    if result:
        print(f"Graph successfully colored using {m} colors:")
        for vertex, color in enumerate(result):
            print(f"Vertex {vertex} â†’ Color {color}")
    else:
        print(f"Cannot color the graph using {m} colors.")
